<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>MALIQ Admin</title>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    <script>
    // Config'i direkt HTML içine göm
    window.CMS_CONFIG = {
        backend: {
            name: "git-gateway",
            branch: "main"
        },
        media_folder: "static/images",
        public_folder: "/images",
        collections: [{
            name: "recipes",
            label: "Tarifler",
            folder: "content/recipes",
            create: true,
            slug: "{{slug}}",
            fields: [
                { name: "title", label: "Yemek Adı", widget: "string" },
                { name: "emoji", label: "Emoji", widget: "string", required: false },
                { name: "category", label: "Kategori", widget: "string" },
                { 
                    label: "Malzemeler",
                    name: "ingredients", 
                    widget: "list",
                    fields: [
                        { name: "name", label: "Ad", widget: "string" },
                        { name: "qty", label: "Miktar", widget: "string" },
                        { name: "unit", label: "Birim", widget: "string" }
                    ]
                },
                { name: "instructions", label: "Tarif Metni", widget: "markdown" }
            ]
        }]
    };
    </script>
</head>
<body>
    <script>
        if (typeof CMS !== 'undefined' && window.CMS_CONFIG) {
            CMS.init({ config: window.CMS_CONFIG });
            console.log('CMS başlatıldı!');
        } else {
            console.error('CMS veya config yüklenemedi!');
        }
    </script>
</body>
</html>
